<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1875px" preserveAspectRatio="none" style="width:957px;height:1875px;background:#FFFFFF;" version="1.1" viewBox="0 0 957 1875" width="957px" zoomAndPan="magnify"><defs/><g><rect fill="#F08080" height="87.2344" style="stroke:#F08080;stroke-width:1;" width="437.8945" x="31.9561" y="474.8906"/><rect fill="#90EE90" height="19.8047" style="stroke:#90EE90;stroke-width:1;" width="437.8945" x="31.9561" y="562.125"/><rect fill="#ADD8E6" height="982.7188" style="stroke:#ADD8E6;stroke-width:1;" width="724.2793" x="217.4136" y="643.0625"/><rect fill="#F08080" height="79.1016" style="stroke:#F08080;stroke-width:1;" width="562.1646" x="236.4136" y="931.0938"/><rect fill="#90EE90" height="601.5859" style="stroke:#90EE90;stroke-width:1;" width="562.1646" x="236.4136" y="1010.1953"/><rect fill="#FFFFE0" height="563.7813" style="stroke:#FFFFE0;stroke-width:1;" width="518.1646" x="255.4136" y="1034"/><rect fill="#98FB98" height="311.5391" style="stroke:#98FB98;stroke-width:1;" width="467.6885" x="274.4136" y="1122.2344"/><rect fill="#AFEEEE" height="77.0703" style="stroke:#AFEEEE;stroke-width:1;" width="467.6885" x="274.4136" y="1433.7734"/><g><title>Calling LLM</title><rect fill="#000000" fill-opacity="0.00000" height="1713.1484" width="8" x="44.4561" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="47.9561" x2="47.9561" y1="81.2969" y2="1794.4453"/></g><g><title>Orchestrator</title><rect fill="#000000" fill-opacity="0.00000" height="1713.1484" width="8" x="305.9136" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="309.4136" x2="309.4136" y1="81.2969" y2="1794.4453"/></g><g><title/><rect fill="#FFFFFF" height="383.5625" style="stroke:#181818;stroke-width:1;" width="10" x="304.4136" y="153.5625"/></g><g><title>LLM Client</title><rect fill="#000000" fill-opacity="0.00000" height="1713.1484" width="8" x="575.6904" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="579.1904" x2="579.1904" y1="81.2969" y2="1794.4453"/></g><g><title/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="574.1904" y="182.6953"/></g><g><title/><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1;" width="10" x="574.1904" y="376.4922"/></g><g><title/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="574.1904" y="747.4297"/></g><g><title/><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1;" width="10" x="574.1904" y="1169.3359"/></g><g><title>Kroki</title><rect fill="#000000" fill-opacity="0.00000" height="1713.1484" width="8" x="749.0781" y="81.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="752.5781" x2="752.5781" y1="81.2969" y2="1794.4453"/></g><g><title/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="747.5781" y="847.8281"/></g><g><title/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="747.5781" y="1081.1016"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9121" x="5" y="77.9951">Calling LLM</text><ellipse cx="47.9561" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M47.9561,21.5 L47.9561,48.5 M34.9561,29.5 L60.9561,29.5 M47.9561,48.5 L34.9561,63.5 M47.9561,48.5 L60.9561,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.8877" x="257.9697" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.8877" x="264.9697" y="69.9951">Orchestrator</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.6592" x="535.8608" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.6592" x="542.8608" y="69.9951">LLM Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49.499" x="727.8286" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.499" x="734.8286" y="69.9951">Kroki</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.9121" x="5" y="1867.4404">Calling LLM</text><ellipse cx="47.9561" cy="1802.9453" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M47.9561,1810.9453 L47.9561,1837.9453 M34.9561,1818.9453 L60.9561,1818.9453 M47.9561,1837.9453 L34.9561,1852.9453 M47.9561,1837.9453 L60.9561,1852.9453" fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.8877" x="257.9697" y="1794.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.8877" x="264.9697" y="1814.4404">Orchestrator</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.6592" x="535.8608" y="1794.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.6592" x="542.8608" y="1814.4404">LLM Client</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49.499" x="727.8286" y="1794.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35.499" x="734.8286" y="1814.4404">Kroki</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="945.6929" x="5" y="109.8633"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="109.8633" y2="109.8633"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="112.8633" y2="112.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="110.1162" x="422.7883" y="99.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="91.5903" x="428.7883" y="115.3638">Setup Phase</text><polygon fill="#181818" points="292.4136,149.5625,302.4136,153.5625,292.4136,157.5625,296.4136,153.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="47.9561" x2="298.4136" y1="153.5625" y2="153.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.4575" x="59.9561" y="148.4966">execute(description, diagram_type)</text><polygon fill="#181818" points="562.1904,178.6953,572.1904,182.6953,562.1904,186.6953,566.1904,182.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="314.4136" x2="568.1904" y1="182.6953" y2="182.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.8188" x="352.8926" y="177.6294">detect_subtype(description)</text><line style="stroke:#181818;stroke-width:1;" x1="584.1904" x2="626.1904" y1="211.8281" y2="211.8281"/><line style="stroke:#181818;stroke-width:1;" x1="626.1904" x2="626.1904" y1="211.8281" y2="224.8281"/><line style="stroke:#181818;stroke-width:1;" x1="585.1904" x2="626.1904" y1="224.8281" y2="224.8281"/><polygon fill="#181818" points="595.1904,220.8281,585.1904,224.8281,595.1904,228.8281,591.1904,224.8281" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.6387" x="591.1904" y="206.7622">Analyze description</text><polygon fill="#181818" points="325.4136,249.9609,315.4136,253.9609,325.4136,257.9609,321.4136,253.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="319.4136" x2="573.1904" y1="253.9609" y2="253.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.0283" x="346.2878" y="248.895">subtype (e.g., "collaboration")</text><line style="stroke:#181818;stroke-width:1;" x1="314.4136" x2="356.4136" y1="283.0938" y2="283.0938"/><line style="stroke:#181818;stroke-width:1;" x1="356.4136" x2="356.4136" y1="283.0938" y2="296.0938"/><line style="stroke:#181818;stroke-width:1;" x1="315.4136" x2="356.4136" y1="296.0938" y2="296.0938"/><polygon fill="#181818" points="325.4136,292.0938,315.4136,296.0938,325.4136,300.0938,321.4136,296.0938" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250.7769" x="321.4136" y="278.0278">load_example(diagram_type, subtype)</text><path d="M584.1904,266.9609 L584.1904,306.9609 L879.1904,306.9609 L879.1904,276.9609 L869.1904,266.9609 L584.1904,266.9609" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M869.1904,266.9609 L869.1904,276.9609 L879.1904,276.9609 L869.1904,266.9609" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.0532" x="590.1904" y="284.0278">Loads reference examples</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274.0093" x="590.1904" y="299.1606">For BPMN collaboration: loads 2 examples</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="945.6929" x="5" y="332.793"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="332.793" y2="332.793"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="335.793" y2="335.793"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="230.4487" x="362.6221" y="322.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="211.9229" x="368.6221" y="338.2935">Description Validation Phase</text><polygon fill="#181818" points="562.1904,372.4922,572.1904,376.4922,562.1904,380.4922,566.1904,376.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="314.4136" x2="568.1904" y1="376.4922" y2="376.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.4019" x="337.6011" y="371.4263">validate_description(description)</text><line style="stroke:#181818;stroke-width:1;" x1="584.1904" x2="626.1904" y1="420.7578" y2="420.7578"/><line style="stroke:#181818;stroke-width:1;" x1="626.1904" x2="626.1904" y1="420.7578" y2="433.7578"/><line style="stroke:#181818;stroke-width:1;" x1="585.1904" x2="626.1904" y1="433.7578" y2="433.7578"/><polygon fill="#181818" points="595.1904,429.7578,585.1904,433.7578,595.1904,437.7578,591.1904,433.7578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.7598" x="591.1904" y="400.5591">Check completeness,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.4106" x="597.865" y="415.6919">consistency, clarity</text><polygon fill="#181818" points="325.4136,458.8906,315.4136,462.8906,325.4136,466.8906,321.4136,462.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="319.4136" x2="573.1904" y1="462.8906" y2="462.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.3652" x="379.6194" y="457.8247">(is_valid, questions)</text><path d="M31.9561,474.8906 L94.9033,474.8906 L94.9033,480.8594 L84.9033,490.8594 L31.9561,490.8594 L31.9561,474.8906" fill="#F8F8F8" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="107.0391" style="stroke:#000000;stroke-width:2;" width="437.8945" x="31.9561" y="474.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17.9473" x="46.9561" y="487.0293">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126.6396" x="109.9033" y="487.1011">[Description invalid]</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="31.9561" x2="469.8506" y1="562.125" y2="562.125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="115.0381" x="36.9561" y="574.3354">[Description valid]</text><polygon fill="#181818" points="58.9561,533.125,48.9561,537.125,58.9561,541.125,54.9561,537.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="52.9561" x2="303.4136" y1="537.125" y2="537.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.1563" x="86.6067" y="516.9263">Return validation questions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.375" x="124.9973" y="532.0591">(exit with error)</text><path d="M319.4136,505.8594 L319.4136,545.8594 L448.4136,545.8594 L448.4136,515.8594 L438.4136,505.8594 L319.4136,505.8594" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M438.4136,505.8594 L438.4136,515.8594 L448.4136,515.8594 L438.4136,505.8594" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.437" x="325.4136" y="522.9263">User must refine</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.4468" x="325.4136" y="538.0591">and re-run</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="945.6929" x="5" y="616.4961"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="616.4961" y2="616.4961"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="619.4961" y2="619.4961"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="276.2915" x="339.7007" y="605.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="257.7656" x="345.7007" y="621.9966">Code Generation &amp; Validation Loop</text><path d="M217.4136,643.0625 L291.605,643.0625 L291.605,649.0313 L281.605,659.0313 L217.4136,659.0313 L217.4136,643.0625" fill="#F8F8F8" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="982.7188" style="stroke:#000000;stroke-width:2;" width="724.2793" x="217.4136" y="643.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="29.1914" x="232.4136" y="655.2012">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="209.6768" x="306.605" y="655.2729">[Iteration Loop (max 5 attempts)]</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="705.2969" y2="705.2969"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="705.2969" y2="718.2969"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="718.2969" y2="718.2969"/><polygon fill="#181818" points="320.4136,714.2969,310.4136,718.2969,320.4136,722.2969,316.4136,718.2969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.3286" x="343.8608" y="685.0981">Build prompt</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.2231" x="316.4136" y="700.231">(initial or refinement)</text><path d="M472.6367,674.0313 L472.6367,714.0313 L655.6367,714.0313 L655.6367,684.0313 L645.6367,674.0313 L472.6367,674.0313" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M645.6367,674.0313 L645.6367,684.0313 L655.6367,684.0313 L645.6367,674.0313" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.459" x="478.6367" y="691.0981">Includes example(s),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.8555" x="478.6367" y="706.231">previous errors/feedback</text><polygon fill="#181818" points="562.1904,743.4297,572.1904,747.4297,562.1904,751.4297,566.1904,747.4297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="568.1904" y1="747.4297" y2="747.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.6001" x="383.502" y="742.3638">generate(prompt)</text><line style="stroke:#181818;stroke-width:1;" x1="584.1904" x2="626.1904" y1="776.5625" y2="776.5625"/><line style="stroke:#181818;stroke-width:1;" x1="626.1904" x2="626.1904" y1="776.5625" y2="789.5625"/><line style="stroke:#181818;stroke-width:1;" x1="585.1904" x2="626.1904" y1="789.5625" y2="789.5625"/><polygon fill="#181818" points="595.1904,785.5625,585.1904,789.5625,595.1904,793.5625,591.1904,789.5625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.3877" x="591.1904" y="771.4966">Generate diagram code</text><polygon fill="#181818" points="320.4136,814.6953,310.4136,818.6953,320.4136,822.6953,316.4136,818.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="314.4136" x2="573.1904" y1="818.6953" y2="818.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.0127" x="389.7957" y="813.6294">diagram_source</text><polygon fill="#181818" points="735.5781,843.8281,745.5781,847.8281,735.5781,851.8281,739.5781,847.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="741.5781" y1="847.8281" y2="847.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.2749" x="428.3584" y="842.7622">render_diagram(source, "svg")</text><line style="stroke:#181818;stroke-width:1;" x1="757.5781" x2="799.5781" y1="876.9609" y2="876.9609"/><line style="stroke:#181818;stroke-width:1;" x1="799.5781" x2="799.5781" y1="876.9609" y2="889.9609"/><line style="stroke:#181818;stroke-width:1;" x1="758.5781" x2="799.5781" y1="889.9609" y2="889.9609"/><polygon fill="#181818" points="768.5781,885.9609,758.5781,889.9609,768.5781,893.9609,764.5781,889.9609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.1147" x="764.5781" y="871.895">Parse &amp; validate syntax</text><polygon fill="#181818" points="320.4136,915.0938,310.4136,919.0938,320.4136,923.0938,316.4136,919.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="314.4136" x2="746.5781" y1="919.0938" y2="919.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.8657" x="448.563" y="914.0278">validation_bytes or error</text><path d="M236.4136,931.0938 L299.3608,931.0938 L299.3608,937.0625 L289.3608,947.0625 L236.4136,947.0625 L236.4136,931.0938" fill="#F8F8F8" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="680.6875" style="stroke:#000000;stroke-width:2;" width="562.1646" x="236.4136" y="931.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17.9473" x="251.4136" y="943.2324">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="87.8765" x="314.3608" y="943.3042">[Syntax error]</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="236.4136" x2="798.5781" y1="1010.1953" y2="1010.1953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86.5928" x="241.4136" y="1022.4058">[Syntax valid]</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="978.1953" y2="978.1953"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="978.1953" y2="991.1953"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="991.1953" y2="991.1953"/><polygon fill="#181818" points="320.4136,987.1953,310.4136,991.1953,320.4136,995.1953,316.4136,991.1953" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.2476" x="316.4136" y="973.1294">Save error for next iteration</text><path d="M515.6611,962.0625 L515.6611,987.0625 L634.6611,987.0625 L634.6611,972.0625 L624.6611,962.0625 L515.6611,962.0625" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M624.6611,962.0625 L624.6611,972.0625 L634.6611,972.0625 L624.6611,962.0625" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.833" x="521.6611" y="979.1294">Loop continues</text><path d="M255.4136,1034 L322.9839,1034 L322.9839,1039.9688 L312.9839,1049.9688 L255.4136,1049.9688 L255.4136,1034" fill="#F8F8F8" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="563.7813" style="stroke:#000000;stroke-width:2;" width="518.1646" x="255.4136" y="1034"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="22.5703" x="270.4136" y="1046.1387">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.8696" x="337.9839" y="1046.2104">[Design validation enabled]</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="255.4136" x2="773.5781" y1="1535.8438" y2="1535.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174.77" x="260.4136" y="1548.0542">[Design validation disabled]</text><polygon fill="#181818" points="735.5781,1077.1016,745.5781,1081.1016,735.5781,1085.1016,739.5781,1081.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="741.5781" y1="1081.1016" y2="1081.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.2998" x="427.3459" y="1076.0356">render_diagram(source, "png")</text><polygon fill="#181818" points="320.4136,1106.2344,310.4136,1110.2344,320.4136,1114.2344,316.4136,1110.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="314.4136" x2="746.5781" y1="1110.2344" y2="1110.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.6055" x="468.1931" y="1105.1685">png_bytes or error</text><path d="M274.4136,1122.2344 L337.3608,1122.2344 L337.3608,1128.2031 L327.3608,1138.2031 L274.4136,1138.2031 L274.4136,1122.2344" fill="#F8F8F8" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="388.6094" style="stroke:#000000;stroke-width:2;" width="467.6885" x="274.4136" y="1122.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17.9473" x="289.4136" y="1134.373">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103.8823" x="352.3608" y="1134.4448">[PNG supported]</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="274.4136" x2="742.1021" y1="1433.7734" y2="1433.7734"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128.3584" x="279.4136" y="1445.9839">[PNG not supported]</text><polygon fill="#181818" points="562.1904,1165.3359,572.1904,1169.3359,562.1904,1173.3359,566.1904,1169.3359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="568.1904" y1="1169.3359" y2="1169.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.2686" x="328.6677" y="1164.27">vision_analyze(png_bytes, criteria)</text><line style="stroke:#181818;stroke-width:1;" x1="584.1904" x2="626.1904" y1="1213.6016" y2="1213.6016"/><line style="stroke:#181818;stroke-width:1;" x1="626.1904" x2="626.1904" y1="1213.6016" y2="1226.6016"/><line style="stroke:#181818;stroke-width:1;" x1="585.1904" x2="626.1904" y1="1226.6016" y2="1226.6016"/><polygon fill="#181818" points="595.1904,1222.6016,585.1904,1226.6016,595.1904,1230.6016,591.1904,1226.6016" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.0518" x="605.1204" y="1193.4028">Analyze layout,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.9116" x="591.1904" y="1208.5356">readability, spacing</text><polygon fill="#181818" points="320.4136,1251.7344,310.4136,1255.7344,320.4136,1259.7344,316.4136,1255.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="314.4136" x2="573.1904" y1="1255.7344" y2="1255.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.7188" x="411.9426" y="1250.6685">feedback</text><path d="M293.4136,1267.7344 L356.3608,1267.7344 L356.3608,1273.7031 L346.3608,1283.7031 L293.4136,1283.7031 L293.4136,1267.7344" fill="#F8F8F8" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="141.0391" style="stroke:#000000;stroke-width:2;" width="390.8135" x="293.4136" y="1267.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17.9473" x="308.4136" y="1279.873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="115.1563" x="371.3608" y="1279.9448">[Design approved]</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="293.4136" x2="684.2271" y1="1346.8359" y2="1346.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180.2324" x="298.4136" y="1359.0464">[Design needs improvement]</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="1314.8359" y2="1314.8359"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="1314.8359" y2="1327.8359"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="1327.8359" y2="1327.8359"/><polygon fill="#181818" points="320.4136,1323.8359,310.4136,1327.8359,320.4136,1331.8359,316.4136,1327.8359" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.5195" x="316.4136" y="1309.77">Exit loop</text><path d="M389.9331,1298.7031 L389.9331,1323.7031 L467.9331,1323.7031 L467.9331,1308.7031 L457.9331,1298.7031 L389.9331,1298.7031" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M457.9331,1298.7031 L457.9331,1308.7031 L467.9331,1308.7031 L457.9331,1298.7031" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57.5415" x="395.9331" y="1315.77">Success!</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="1387.7734" y2="1387.7734"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="1387.7734" y2="1400.7734"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="1400.7734" y2="1400.7734"/><polygon fill="#181818" points="320.4136,1396.7734,310.4136,1400.7734,320.4136,1404.7734,316.4136,1400.7734" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209.9805" x="316.4136" y="1382.7075">Save feedback for next iteration</text><path d="M543.394,1371.6406 L543.394,1396.6406 L662.394,1396.6406 L662.394,1381.6406 L652.394,1371.6406 L543.394,1371.6406" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M652.394,1371.6406 L652.394,1381.6406 L662.394,1381.6406 L652.394,1371.6406" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.833" x="549.394" y="1388.7075">Loop continues</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="1489.8438" y2="1489.8438"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="1489.8438" y2="1502.8438"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="1502.8438" y2="1502.8438"/><polygon fill="#181818" points="320.4136,1498.8438,310.4136,1502.8438,320.4136,1506.8438,316.4136,1502.8438" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.1704" x="316.4136" y="1469.645">Skip design validation,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.3037" x="361.8469" y="1484.7778">exit loop</text><path d="M480.584,1458.5781 L480.584,1483.5781 L648.584,1483.5781 L648.584,1468.5781 L638.584,1458.5781 L480.584,1458.5781" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M638.584,1458.5781 L638.584,1468.5781 L648.584,1468.5781 L638.584,1458.5781" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.7798" x="486.584" y="1475.645">Syntax valid is enough</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="1576.7813" y2="1576.7813"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="1576.7813" y2="1589.7813"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="1589.7813" y2="1589.7813"/><polygon fill="#181818" points="320.4136,1585.7813,310.4136,1589.7813,320.4136,1593.7813,316.4136,1589.7813" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.5195" x="316.4136" y="1571.7153">Exit loop</text><path d="M389.9331,1560.6484 L389.9331,1585.6484 L557.9331,1585.6484 L557.9331,1570.6484 L547.9331,1560.6484 L389.9331,1560.6484" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M547.9331,1560.6484 L547.9331,1570.6484 L557.9331,1570.6484 L547.9331,1560.6484" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.7798" x="395.9331" y="1577.7153">Syntax valid is enough</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="945.6929" x="5" y="1660.3477"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="1660.3477" y2="1660.3477"/><line style="stroke:#000000;stroke-width:1;" x1="5" x2="950.6929" y1="1663.3477" y2="1663.3477"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="103.9971" x="425.8479" y="1649.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="85.4712" x="431.8479" y="1665.8481">Finalization</text><line style="stroke:#181818;stroke-width:1;" x1="309.4136" x2="351.4136" y1="1719.1797" y2="1719.1797"/><line style="stroke:#181818;stroke-width:1;" x1="351.4136" x2="351.4136" y1="1719.1797" y2="1732.1797"/><line style="stroke:#181818;stroke-width:1;" x1="310.4136" x2="351.4136" y1="1732.1797" y2="1732.1797"/><polygon fill="#181818" points="320.4136,1728.1797,310.4136,1732.1797,320.4136,1736.1797,316.4136,1732.1797" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.6201" x="322.5962" y="1698.981">Write output files</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.9854" x="316.4136" y="1714.1138">(SVG, PNG, source)</text><polygon fill="#181818" points="58.9561,1772.4453,48.9561,1776.4453,58.9561,1780.4453,54.9561,1776.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="52.9561" x2="308.4136" y1="1776.4453" y2="1776.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.1475" x="136.1111" y="1756.2466">Return result</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.6733" x="107.8481" y="1771.3794">(metadata, file paths)</text><!--SRC=[bLPjRzis4FwkNt5rWS86t6uTLg08a06DjsJ5aiwO-u810GoQkiY4QP8bATVEhz-Hb1JALeP4HLjPUkxkkUTUg1V6ichBmAE-1szhB0gt4SemoxRWy7kDYkCDEiSg_215fO2ZycWpr8NUprbP2bN1stVPypcpNd1XcFBj-rz_pjul6kzaVw5jYNQcfRRmydsy1e1NLjScGJ-l1TyeeWM_F0Ry4na1BxNo2t6FyFOfG7-G22ijoqUZCxwfw4QL3TdBz-5FKJ3kwUTengGCYLvVtuo0EVZYI2hp80IC_hPyZSvRHlW82G_w43A6cHIaSmJGp_xxlwpUYFWgtXN5-JcnzBM1-PevXFFpeWY1uVLlqViPu1vvxN5SekDM62-qca8fM4K9Blt1u2Ga87RCO-9JX7-3FGK_Wn8zShzqzIfWSo-PNQ0PcBT67nIJ1n8-GwVt7Ql67upnJVLc2YEkfMGhJT8GTZGfIkmvxpWbQwbPkSGzsnf9bB9SfgtZIQ4qsLfHhVqPN1FUWSKxjA6Sq9YwMtL9bRkOtto27e4KWHgiGqQXVtz81xuoASe8pfJlARTB25ncAZnHlzaQ-OOeXT0UGwzFRnNNoWb7F_bX2bmoA_pXIDMnSCiOTWhKk2v4SQTQCkdXvNLGPaRvobvQGaNx0kXAsP3pq51dy0-rcLLjMW7SnRXLOzmB3p-4NmDQg-qaUiXh4BjoMpiVwY0KtYgcIhf_RMiLmHdDs8SeITN4yyeYgXxF1vPvZ1aDib0rWjTGaMwfcWMgCjPlfak4g-uvlCghUAsrYKMKuIR5lP3awwDlyH4oth8zl0FcFMwD9taphTewNDH2bc0i5T2JDa89BqXewhMK-vRc-rIXZuhBcXgaRRgncr3PZSMTqBLBkhgVxX3B5QsYVjpODatAE4wHKuHUxSE3lD4QCR1T2DHp9JwWkeJQ6NEwjXoFonMxAcSJTzCP9QjekouRut4ofc5tksfqH2vji_0etcLEw2YXFdZLZHEuW_9idsCxcW-zkLmTF2b9YaVPZXatopDIE9g6HNIVcPsMTy5sc01mHtyLxZs8jaiwc_u2eixXJNUw23bfxoPmwkpEYpOjlNzHIlqZJ44uYhCnHCLM4ZERPvJ2gBOKxJLGalOwbfkCXtHkhs6zkpX1zpcJcBAVVxgYtMsCjXxB7l2apNV2XGgpTCYCEnQq5MqeWs2J4mSdKv1VGqUNP0TTUve_Ivy8R2KaRLiwNGpZTCOFU-XqwKRq63OqCyUQDFLbXePuDo35QJl-4LPls5g3sBmD5pNdT9YyE076PcmYAsBlG6nZ_B2fda0XJaIRzlyDnMFC1WQanq_rXKZ34xhdSss_rrhGpz11vF89NTHmtWWJlb3wqqGLnqVrx6cPZIi8MizArzMwU8nrhd0skwLmQNYVMzvdK6bfXF_Re_1IK9-B-qGY_tH9CR-5GG8Q05Dxk1FnKscy-7er3IhJ6CJrCIc6ln0ikbg6Ss-BdcR7isbq0ORvTVzp99xp_m40]--></g></svg>